server:
  port: 48082

spring:
  application:
    name: mock-school-api
  profiles:
    active: local
  
  # MySQLæ•°æ®æºé…ç½®ï¼ˆå¼ºåˆ¶ä½¿ç”¨utf8ï¼‰
  datasource:
    # å…³é”®ä¿®æ­£ï¼šç§»é™¤æ‰€æœ‰å¯èƒ½å¯¼è‡´utf8mb4çš„å‚æ•°
    url: jdbc:mysql://127.0.0.1:3306/ruoyi-vue-pro?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true&characterEncoding=utf8&useUnicode=true
    username: root
    password: 
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      minimum-idle: 1
      maximum-pool-size: 10
      pool-name: MockSchoolHikariCP
      connection-init-sql: "SET NAMES utf8 COLLATE utf8_general_ci"
      # å…³é”®ï¼šæ˜¾å¼è®¾ç½®æ•°æ®æºå±æ€§æ¥å¼ºåˆ¶ä½¿ç”¨utf8
      data-source-properties:
        characterEncoding: utf8
        useUnicode: true
        
  # JPAé…ç½®
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        # ä¸æ˜¾å¼æŒ‡å®šMySQLDialectï¼Œè®©Hibernateè‡ªåŠ¨é€‰æ‹©
        format_sql: true
        connection:
          characterEncoding: utf8
          useUnicode: true
        # å¼ºåˆ¶ä½¿ç”¨utf8
        globally_quoted_identifiers: true

# ğŸ†• P0-CRITICAL-4: é…ç½®é©±åŠ¨æ¨¡å¼åˆ‡æ¢ç³»ç»Ÿ
school:
  api:
    # APIæ¨¡å¼ï¼šMOCK(å¼€å‘æµ‹è¯•) æˆ– REAL(ç”Ÿäº§ç¯å¢ƒ)
    mode: REAL
    
    # æ˜¯å¦å¯ç”¨é™çº§æœºåˆ¶ï¼šRealæ¨¡å¼å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°Mockæ¨¡å¼
    fallback-enabled: true
    
    # Mockæ¨¡å¼é…ç½®
    mock:
      enabled: true
      delay-ms: 200  # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    
    # Realæ¨¡å¼é…ç½®ï¼ˆçœŸå®å­¦æ ¡APIï¼‰
    real:
      base-url: https://work.greathiit.com
      path: /api/user/loginWai
      method: POST
      username-field: userNumber
      password-field: password
      connect-timeout-ms: 5000
      read-timeout-ms: 10000
      max-retries: 2
      retry-delay-ms: 1000
        
# æ—¥å¿—é…ç½®
logging:
  level:
    cn.iocoder.yudao.mock.school: INFO
    cn.iocoder.yudao.mock.school.service.impl.DelegatingSchoolApiClient: DEBUG  # å§”æ‰˜æ¨¡å¼è¯¦ç»†æ—¥å¿—
    cn.iocoder.yudao.mock.school.config.ModeManager: DEBUG  # æ¨¡å¼åˆ‡æ¢è¯¦ç»†æ—¥å¿—
    org.hibernate.SQL: INFO
    org.hibernate.type.descriptor.sql.BasicBinder: INFO
    com.zaxxer.hikari: INFO
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"