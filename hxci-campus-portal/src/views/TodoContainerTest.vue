<!--
  TodoNotificationContainerç»„ä»¶æµ‹è¯•é¡µé¢
  
  @description ç”¨äºæµ‹è¯•ç¬¬2å±‚TodoNotificationContainerç»„ä»¶çš„åŸºç¡€åŠŸèƒ½
  @date 2025-08-22
  
  æµ‹è¯•å†…å®¹:
  âœ… Propsä¼ é€’æµ‹è¯•
  âœ… è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º
  âœ… ä¸åŒPropsç»„åˆéªŒè¯
  âœ… å“åº”å¼æ›´æ–°æµ‹è¯•
-->

<template>
  <div class="test-page">
    <div class="test-header">
      <h1>ğŸ“‹ TodoNotificationContainer ç¬¬2å±‚æµ‹è¯•</h1>
      <p>æµ‹è¯•Propsé©±åŠ¨çš„å¾…åŠé€šçŸ¥å®¹å™¨ç»„ä»¶åŸºç¡€åŠŸèƒ½</p>
    </div>
    
    <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
    <div class="test-controls">
      <h3>ğŸ”§ æµ‹è¯•å‚æ•°æ§åˆ¶</h3>
      <div class="control-grid">
        <div class="control-item">
          <label>å­¦å·:</label>
          <el-input v-model="testProps.studentId" placeholder="å¦‚ï¼š2023010105" />
        </div>
        <div class="control-item">
          <label>å¹´çº§:</label>
          <el-select v-model="testProps.grade" placeholder="é€‰æ‹©å¹´çº§">
            <el-option label="2023çº§" value="2023" />
            <el-option label="2022çº§" value="2022" />
            <el-option label="2021çº§" value="2021" />
          </el-select>
        </div>
        <div class="control-item">
          <label>ç­çº§:</label>
          <el-input v-model="testProps.className" placeholder="å¦‚ï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯1ç­" />
        </div>
        <div class="control-item">
          <label>ç”¨æˆ·è§’è‰²:</label>
          <el-select v-model="testProps.userRole" placeholder="é€‰æ‹©è§’è‰²">
            <el-option label="å­¦ç”Ÿ" value="STUDENT" />
            <el-option label="æ•™å¸ˆ" value="TEACHER" />
            <el-option label="ç­ä¸»ä»»" value="CLASS_TEACHER" />
            <el-option label="æ•™åŠ¡ä¸»ä»»" value="ACADEMIC_ADMIN" />
            <el-option label="æ ¡é•¿" value="PRINCIPAL" />
            <el-option label="ç³»ç»Ÿç®¡ç†å‘˜" value="SYSTEM_ADMIN" />
          </el-select>
        </div>
        <div class="control-item">
          <label>æ˜¾ç¤ºæ¨¡å¼:</label>
          <el-select v-model="testProps.displayMode" placeholder="é€‰æ‹©æ¨¡å¼">
            <el-option label="å¡ç‰‡æ¨¡å¼" value="card" />
            <el-option label="åˆ—è¡¨æ¨¡å¼" value="list" />
            <el-option label="ç´§å‡‘æ¨¡å¼" value="compact" />
            <el-option label="ç»Ÿè®¡æ¨¡å¼" value="statistics" />
            <el-option label="æ—¥å†æ¨¡å¼" value="calendar" />
          </el-select>
        </div>
        <div class="control-item">
          <label>æœ€å¤§æ˜¾ç¤ºæ•°:</label>
          <el-input-number v-model="testProps.maxItems" :min="1" :max="100" />
        </div>
        <div class="control-item">
          <label>æ˜¾ç¤ºå·²å®Œæˆ:</label>
          <el-switch v-model="testProps.showCompleted" />
        </div>
        <div class="control-item">
          <label>æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯:</label>
          <el-switch v-model="testProps.showDebugInfo" />
        </div>
      </div>
      
      <div class="control-actions">
        <el-button @click="resetProps" type="warning">é‡ç½®å‚æ•°</el-button>
        <el-button @click="loadPresetStudent" type="primary">å­¦ç”Ÿé¢„è®¾</el-button>
        <el-button @click="loadPresetTeacher" type="success">æ•™å¸ˆé¢„è®¾</el-button>
      </div>
    </div>
    
    <!-- ç¬¬2å±‚ç»„ä»¶æµ‹è¯•å®ä¾‹ -->
    <div class="test-instances">
      <h3>ğŸ§ª ç»„ä»¶æµ‹è¯•å®ä¾‹</h3>
      
      <!-- æµ‹è¯•å®ä¾‹1ï¼šå½“å‰é…ç½® -->
      <div class="test-instance">
        <h4>å®ä¾‹1: å½“å‰é…ç½®æµ‹è¯•</h4>
        <TodoNotificationContainer
          :student-id="testProps.studentId"
          :grade="testProps.grade"
          :class-name="testProps.className"
          :user-role="testProps.userRole"
          :display-mode="testProps.displayMode"
          :max-items="testProps.maxItems"
          :show-completed="testProps.showCompleted"
          :show-debug-info="testProps.showDebugInfo"
        />
      </div>
      
      <!-- æµ‹è¯•å®ä¾‹2ï¼šå­¦ç”Ÿé»˜è®¤é…ç½® -->
      <div class="test-instance">
        <h4>å®ä¾‹2: å­¦ç”Ÿé»˜è®¤é…ç½®</h4>
        <TodoNotificationContainer
          student-id="2023010105"
          grade="2023"
          class-name="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯1ç­"
          user-role="STUDENT"
          display-mode="card"
          :max-items="5"
          :show-completed="false"
          :show-debug-info="true"
        />
      </div>
      
      <!-- æµ‹è¯•å®ä¾‹3ï¼šæ•™å¸ˆé…ç½® -->
      <div class="test-instance">
        <h4>å®ä¾‹3: æ•™å¸ˆé…ç½®</h4>
        <TodoNotificationContainer
          grade="2023"
          class-name="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯"
          user-role="TEACHER"
          display-mode="list"
          :max-items="10"
          :show-completed="true"
          :show-debug-info="true"
        />
      </div>
    </div>
    
    <!-- æ§åˆ¶å°æ—¥å¿—ç›‘æ§ -->
    <div class="console-monitor">
      <h3>ğŸ“Š æ§åˆ¶å°æ—¥å¿—ç›‘æ§</h3>
      <p>è¯·æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°ï¼ŒæŸ¥çœ‹ç»„ä»¶è°ƒè¯•è¾“å‡º</p>
      <el-alert 
        title="ç¬¬2å±‚æµ‹è¯•é‡ç‚¹" 
        type="info" 
        :closable="false"
        description="éªŒè¯Propsæ¥æ”¶ã€ç±»å‹å®‰å…¨ã€è°ƒè¯•è¾“å‡ºå’Œå“åº”å¼æ›´æ–°åŠŸèƒ½"
      />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'
import TodoNotificationContainer from '@/components/todo/TodoNotificationContainer.vue'
import type { UserRole, TodoDisplayMode } from '@/types/todo'

// ================ æµ‹è¯•æ•°æ® ================

interface TestProps {
  studentId?: string
  grade?: string
  className?: string
  userRole?: UserRole
  displayMode?: TodoDisplayMode
  maxItems?: number
  showCompleted?: boolean
  showDebugInfo?: boolean
}

const testProps = ref<TestProps>({
  studentId: '',
  grade: '',
  className: '',
  userRole: 'STUDENT',
  displayMode: 'card',
  maxItems: 10,
  showCompleted: false,
  showDebugInfo: true
})

// ================ æ§åˆ¶æ–¹æ³• ================

const resetProps = () => {
  testProps.value = {
    studentId: '',
    grade: '',
    className: '',
    userRole: 'STUDENT',
    displayMode: 'card',
    maxItems: 10,
    showCompleted: false,
    showDebugInfo: true
  }
  console.log('ğŸ”„ [TestPage] å‚æ•°å·²é‡ç½®')
}

const loadPresetStudent = () => {
  testProps.value = {
    studentId: '2023010105',
    grade: '2023',
    className: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯1ç­',
    userRole: 'STUDENT',
    displayMode: 'card',
    maxItems: 5,
    showCompleted: false,
    showDebugInfo: true
  }
  console.log('ğŸ‘¨â€ğŸ“ [TestPage] åŠ è½½å­¦ç”Ÿé¢„è®¾é…ç½®')
}

const loadPresetTeacher = () => {
  testProps.value = {
    studentId: undefined,
    grade: '2023',
    className: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯',
    userRole: 'TEACHER',
    displayMode: 'list',
    maxItems: 15,
    showCompleted: true,
    showDebugInfo: true
  }
  console.log('ğŸ‘¨â€ğŸ« [TestPage] åŠ è½½æ•™å¸ˆé¢„è®¾é…ç½®')
}

// ================ ç›‘å¬å™¨ ================

watch(testProps, (newProps) => {
  console.log('ğŸ”„ [TestPage] æµ‹è¯•å‚æ•°æ›´æ–°:', newProps)
}, { deep: true })

console.log('ğŸ“„ [TestPage] TodoNotificationContaineræµ‹è¯•é¡µé¢å·²åŠ è½½')
</script>

<style scoped lang="scss">
.test-page {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.test-header {
  text-align: center;
  margin-bottom: 32px;
  
  h1 {
    color: #495057;
    margin-bottom: 8px;
  }
  
  p {
    color: #6c757d;
    font-size: 16px;
  }
}

.test-controls {
  background: white;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  padding: 24px;
  margin-bottom: 32px;
  
  h3 {
    margin: 0 0 16px 0;
    color: #495057;
  }
  
  .control-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
    margin-bottom: 16px;
  }
  
  .control-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
    
    label {
      font-weight: 500;
      color: #495057;
      font-size: 14px;
    }
  }
  
  .control-actions {
    display: flex;
    gap: 12px;
    padding-top: 16px;
    border-top: 1px solid #dee2e6;
  }
}

.test-instances {
  .test-instance {
    margin-bottom: 32px;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    overflow: hidden;
    
    h4 {
      background: #f8f9fa;
      margin: 0;
      padding: 16px;
      border-bottom: 1px solid #dee2e6;
      color: #495057;
      font-size: 16px;
    }
    
    > :deep(.todo-notification-container) {
      margin: 16px;
    }
  }
}

.console-monitor {
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 8px;
  padding: 24px;
  text-align: center;
  
  h3 {
    margin: 0 0 16px 0;
    color: #495057;
  }
  
  p {
    color: #6c757d;
    margin-bottom: 16px;
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .test-page {
    padding: 16px;
  }
  
  .control-grid {
    grid-template-columns: 1fr;
  }
  
  .control-actions {
    flex-direction: column;
  }
}
</style>