<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Phase 2 åŠŸèƒ½æµ‹è¯•éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-btn:hover {
            background: #0056b3;
        }
        .result-area {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª Phase 2 åŠŸèƒ½æµ‹è¯•éªŒè¯</h1>
        <p>æµ‹è¯•phase2-authentication-enhanced.htmlæ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
        
        <button class="test-btn" onclick="testBasicJS()">æµ‹è¯•åŸºç¡€JavaScript</button>
        <button class="test-btn" onclick="testAPIConfig()">æµ‹è¯•APIé…ç½®</button>
        <button class="test-btn" onclick="testDOMElements()">æµ‹è¯•DOMå…ƒç´ </button>
        <button class="test-btn" onclick="openMainPage()">æ‰“å¼€ä¸»é¡µé¢</button>
        
        <div id="results" class="result-area">ç­‰å¾…æµ‹è¯•ç»“æœ...</div>
    </div>

    <script>
        function log(message) {
            const results = document.getElementById('results');
            results.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
        }

        function testBasicJS() {
            log('ğŸ§ª å¼€å§‹åŸºç¡€JavaScriptæµ‹è¯•');
            
            try {
                // æµ‹è¯•åŸºæœ¬å˜é‡å®šä¹‰
                const testState = {
                    isAuthenticated: false,
                    currentToken: '',
                    selectedAccount: {
                        role: 'PRINCIPAL',
                        employeeId: 'PRINCIPAL_001',
                        name: 'Principal-Zhang'
                    }
                };
                
                log('âœ… åŸºç¡€JavaScriptå¯¹è±¡åˆ›å»ºæˆåŠŸ');
                log('âœ… çŠ¶æ€: ' + JSON.stringify(testState, null, 2));
                
            } catch (error) {
                log('âŒ åŸºç¡€JavaScriptæµ‹è¯•å¤±è´¥: ' + error.message);
            }
        }

        function testAPIConfig() {
            log('ğŸ”— å¼€å§‹APIé…ç½®æµ‹è¯•');
            
            try {
                const API_CONFIG = {
                    MOCK_API: 'http://localhost:48082',
                    HEADERS: {
                        'Content-Type': 'application/json; charset=UTF-8'
                    }
                };
                
                log('âœ… APIé…ç½®åˆ›å»ºæˆåŠŸ');
                log('âœ… Mock API: ' + API_CONFIG.MOCK_API);
                log('âœ… Headers: ' + JSON.stringify(API_CONFIG.HEADERS));
                
            } catch (error) {
                log('âŒ APIé…ç½®æµ‹è¯•å¤±è´¥: ' + error.message);
            }
        }

        async function testDOMElements() {
            log('ğŸ“‹ å¼€å§‹DOMå…ƒç´ æµ‹è¯•');
            
            try {
                // æµ‹è¯•åŸºæœ¬DOMæ“ä½œ
                const testDiv = document.createElement('div');
                testDiv.id = 'testElement';
                testDiv.textContent = 'Test Content';
                
                document.body.appendChild(testDiv);
                
                const foundElement = document.getElementById('testElement');
                if (foundElement) {
                    log('âœ… DOMå…ƒç´ åˆ›å»ºå’ŒæŸ¥æ‰¾æˆåŠŸ');
                    foundElement.remove();
                    log('âœ… DOMå…ƒç´ åˆ é™¤æˆåŠŸ');
                } else {
                    log('âŒ DOMå…ƒç´ æŸ¥æ‰¾å¤±è´¥');
                }
                
            } catch (error) {
                log('âŒ DOMæµ‹è¯•å¤±è´¥: ' + error.message);
            }
        }

        function openMainPage() {
            log('ğŸ”„ å°è¯•æ‰“å¼€ä¸»é¡µé¢...');
            try {
                window.open('phase2-authentication-enhanced.html', '_blank');
                log('âœ… ä¸»é¡µé¢æ‰“å¼€æˆåŠŸ');
            } catch (error) {
                log('âŒ ä¸»é¡µé¢æ‰“å¼€å¤±è´¥: ' + error.message);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
        window.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•');
            setTimeout(() => {
                testBasicJS();
                testAPIConfig(); 
                testDOMElements();
            }, 500);
        });
    </script>
</body>
</html>