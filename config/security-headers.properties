# HTTP安全头配置文件
# Phase 1.4 - 环境适配配置

# 基础服务配置
server.ssl.enabled=false
spring.profiles.active=local

# 安全头配置
app.security.headers.enabled=true
app.security.headers.frame-options=DENY
app.security.headers.content-type-options=nosniff
app.security.headers.xss-protection=1; mode=block
app.security.headers.referrer-policy=strict-origin-when-cross-origin

# CSP配置
app.security.csp.enabled=true
app.security.csp.report-only=false
app.security.csp.report-uri=/csp-report
app.security.csp.default-src='self'
app.security.csp.script-src-dev='self' 'unsafe-inline' 'unsafe-eval' localhost:* 127.0.0.1:* ws://localhost:* wss://localhost:*
app.security.csp.script-src-prod='self' 'nonce-{NONCE}'
app.security.csp.style-src='self' 'unsafe-inline' fonts.googleapis.com cdn.jsdelivr.net
app.security.csp.img-src='self' data: https: *.qweatherapi.com api.qweather.com
app.security.csp.font-src='self' fonts.gstatic.com cdn.jsdelivr.net
app.security.csp.connect-src='self' http://localhost:48081 http://localhost:48082 https://work.greathiit.com https://kc62b63hjr.re.qweatherapi.com ws://localhost:* wss://localhost:*
app.security.csp.media-src='self'
app.security.csp.object-src='none'
app.security.csp.frame-ancestors='none'
app.security.csp.base-uri='self'
app.security.csp.form-action='self'

# 权限策略配置
app.security.permissions-policy.enabled=true
app.security.permissions-policy.camera=()
app.security.permissions-policy.microphone=()
app.security.permissions-policy.geolocation=()
app.security.permissions-policy.payment=()
app.security.permissions-policy.usb=()
app.security.permissions-policy.magnetometer=()
app.security.permissions-policy.gyroscope=()
app.security.permissions-policy.accelerometer=()
app.security.permissions-policy.autoplay=self
app.security.permissions-policy.fullscreen=self

# HSTS配置（生产环境）
app.security.hsts.enabled=false
app.security.hsts.max-age=31536000
app.security.hsts.include-subdomains=true
app.security.hsts.preload=true

# CORS配置
app.security.cors.enabled=true
app.security.cors.allowed-origins=*
app.security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.security.cors.allowed-headers=*
app.security.cors.allow-credentials=true
app.security.cors.exposed-headers=X-CSRF-TOKEN,X-CSRF-HEADER,X-CSRF-PARAMETER

# 缓存控制
app.security.cache-control.api-no-cache=true
app.security.cache-control.sensitive-no-cache=true

# 安全监控
app.security.monitoring.enabled=true
app.security.monitoring.log-violations=true
app.security.monitoring.alert-threshold=10

# 环境特定配置
# 开发环境
[dev]
app.security.csp.report-only=true
app.security.hsts.enabled=false
app.security.monitoring.alert-threshold=50

# 生产环境  
[prod]
app.security.csp.report-only=false
app.security.hsts.enabled=true
app.security.cors.allowed-origins=https://yourdomain.com
app.security.monitoring.alert-threshold=5